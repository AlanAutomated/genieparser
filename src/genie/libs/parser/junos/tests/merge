class TestShowOspfInterfaceExtensive(unittest.TestCase):
    """ Unit tests for:
            * show ospf interface extensive
    """

    maxDiff = None

    device = Device(name='aDevice')

    empty_output = {'execute.return_value': ''}

    golden_output = {'execute.return_value': '''
                show ospf interface extensive
        Interface           State   Area            DR ID           BDR ID          Nbrs
        ge-0/0/0.0          PtToPt  0.0.0.8         0.0.0.0         0.0.0.0            1
        Type: P2P, Address: 111.87.5.93, Mask: 255.255.255.252, MTU: 1500, Cost: 5
        Adj count: 1
        Hello: 10, Dead: 40, ReXmit: 5, Not Stub
        Auth type: None
        Protection type: Post Convergence
        Post convergence protection: Enabled, Fate sharing: No, SRLG: No, Node cost: 100
        Topology default (ID 0) -> Cost: 5
        ge-0/0/1.0          PtToPt  0.0.0.8         0.0.0.0         0.0.0.0            1
        Type: P2P, Address: 106.187.14.122, Mask: 255.255.255.252, MTU: 1500, Cost: 100
        Adj count: 1
        Hello: 10, Dead: 40, ReXmit: 5, Not Stub
        Auth type: None
        Protection type: Post Convergence
        Post convergence protection: Enabled, Fate sharing: No, SRLG: No, Node cost: 100
        Topology default (ID 0) -> Cost: 100
        ge-0/0/2.0          PtToPt  0.0.0.8         0.0.0.0         0.0.0.0            1
        Type: P2P, Address: 27.86.198.25, Mask: 255.255.255.252, MTU: 1500, Cost: 1000
        Adj count: 1
        Hello: 10, Dead: 40, ReXmit: 5, Not Stub
        Auth type: None
        Protection type: Post Convergence
        Post convergence protection: Enabled, Fate sharing: No, SRLG: No, Node cost: 100
        Topology default (ID 0) -> Cost: 1000
        ge-0/0/3.0          DRother 0.0.0.8         0.0.0.0         0.0.0.0            0
        Type: LAN, Address: 100.0.0.254, Mask: 255.255.255.0, MTU: 1500, Cost: 100
        Adj count: 0, Passive
        Hello: 10, Dead: 40, ReXmit: 5, Not Stub
        Auth type: None
        Protection type: None
        Topology default (ID 0) -> Passive, Cost: 100
        lo0.0               DR      0.0.0.8         111.87.5.252    0.0.0.0            0
        Type: LAN, Address: 111.87.5.252, Mask: 255.255.255.255, MTU: 65535, Cost: 0
        DR addr: 111.87.5.252, Priority: 128
        Adj count: 0
        Hello: 10, Dead: 40, ReXmit: 5, Not Stub
        Auth type: None
        Protection type: None
        Topology default (ID 0) -> Cost: 0
        '''}

    golden_parsed_output = {
        "ospf-interface-information": {
            "ospf-interface": [
                {
                    "address-mask": "255.255.255.252",
                    "adj-count": "1",
                    "authentication-type": "None",
                    "bdr-id": "0.0.0.0",
                    "dead-interval": "40",
                    "dr-id": "0.0.0.0",
                    "hello-interval": "10",
                    "interface-address": "111.87.5.93",
                    "interface-cost": "5",
                    "interface-name": "ge-0/0/0.0",
                    "interface-type": "P2P",
                    "mtu": "1500",
                    "neighbor-count": "1",
                    "ospf-area": "0.0.0.8",
                    "ospf-interface-protection-type": "Post Convergence",
                    "ospf-interface-state": "PtToPt",
                    "ospf-interface-tilfa-prot-fate": "No",
                    "ospf-interface-tilfa-prot-link": "Enabled",
                    "ospf-interface-tilfa-prot-node": "100",
                    "ospf-interface-tilfa-prot-srlg": "No",
                    "ospf-interface-topology": {
                        "ospf-topology-id": "0",
                        "ospf-topology-metric": "5",
                        "ospf-topology-name": "default"
                    },
                    "ospf-stub-type": "Not Stub",
                    "retransmit-interval": "5"
                },
                {
                    "address-mask": "255.255.255.252",
                    "adj-count": "1",
                    "authentication-type": "None",
                    "bdr-id": "0.0.0.0",
                    "dead-interval": "40",
                    "dr-id": "0.0.0.0",
                    "hello-interval": "10",
                    "interface-address": "106.187.14.122",
                    "interface-cost": "100",
                    "interface-name": "ge-0/0/1.0",
                    "interface-type": "P2P",
                    "mtu": "1500",
                    "neighbor-count": "1",
                    "ospf-area": "0.0.0.8",
                    "ospf-interface-protection-type": "Post Convergence",
                    "ospf-interface-state": "PtToPt",
                    "ospf-interface-tilfa-prot-fate": "No",
                    "ospf-interface-tilfa-prot-link": "Enabled",
                    "ospf-interface-tilfa-prot-node": "100",
                    "ospf-interface-tilfa-prot-srlg": "No",
                    "ospf-interface-topology": {
                        "ospf-topology-id": "0",
                        "ospf-topology-metric": "100",
                        "ospf-topology-name": "default"
                    },
                    "ospf-stub-type": "Not Stub",
                    "retransmit-interval": "5"
                },
                {
                    "address-mask": "255.255.255.252",
                    "adj-count": "1",
                    "authentication-type": "None",
                    "bdr-id": "0.0.0.0",
                    "dead-interval": "40",
                    "dr-id": "0.0.0.0",
                    "hello-interval": "10",
                    "interface-address": "27.86.198.25",
                    "interface-cost": "1000",
                    "interface-name": "ge-0/0/2.0",
                    "interface-type": "P2P",
                    "mtu": "1500",
                    "neighbor-count": "1",
                    "ospf-area": "0.0.0.8",
                    "ospf-interface-protection-type": "Post Convergence",
                    "ospf-interface-state": "PtToPt",
                    "ospf-interface-tilfa-prot-fate": "No",
                    "ospf-interface-tilfa-prot-link": "Enabled",
                    "ospf-interface-tilfa-prot-node": "100",
                    "ospf-interface-tilfa-prot-srlg": "No",
                    "ospf-interface-topology": {
                        "ospf-topology-id": "0",
                        "ospf-topology-metric": "1000",
                        "ospf-topology-name": "default"
                    },
                    "ospf-stub-type": "Not Stub",
                    "retransmit-interval": "5"
                },
                {
                    "address-mask": "255.255.255.0",
                    "adj-count": "0",
                    "authentication-type": "None",
                    "bdr-id": "0.0.0.0",
                    "dead-interval": "40",
                    "dr-id": "0.0.0.0",
                    "hello-interval": "10",
                    "interface-address": "100.0.0.254",
                    "interface-cost": "100",
                    "interface-name": "ge-0/0/3.0",
                    "interface-type": "LAN",
                    "mtu": "1500",
                    "neighbor-count": "0",
                    "ospf-area": "0.0.0.8",
                    "ospf-interface-protection-type": "None",
                    "ospf-interface-state": "DRother",
                    "ospf-interface-topology": {
                        "ospf-topology-id": "0",
                        "ospf-topology-metric": "100",
                        "ospf-topology-name": "default",
                        "ospf-topology-passive": True
                    },
                    "ospf-stub-type": "Not Stub",
                    "passive": "Passive",
                    "retransmit-interval": "5"
                },
                {
                    "address-mask": "255.255.255.255",
                    "adj-count": "0",
                    "authentication-type": "None",
                    "bdr-id": "0.0.0.0",
                    "dead-interval": "40",
                    "dr-address": "111.87.5.252",
                    "dr-id": "111.87.5.252",
                    "hello-interval": "10",
                    "interface-address": "111.87.5.252",
                    "interface-cost": "0",
                    "interface-name": "lo0.0",
                    "interface-type": "LAN",
                    "mtu": "65535",
                    "neighbor-count": "0",
                    "ospf-area": "0.0.0.8",
                    "ospf-interface-protection-type": "None",
                    "ospf-interface-state": "DR",
                    "ospf-interface-topology": {
                        "ospf-topology-id": "0",
                        "ospf-topology-metric": "0",
                        "ospf-topology-name": "default"
                    },
                    "ospf-stub-type": "Not Stub",
                    "retransmit-interval": "5",
                    "router-priority": "128"
                }
            ]
        }
    }

    def test_empty(self):
        self.device = Mock(**self.empty_output)
        obj = ShowOspfInterfaceExtensive(device=self.device)
        with self.assertRaises(SchemaEmptyParserError):
            obj.parse()

    def test_golden(self):
        self.device = Mock(**self.golden_output)
        obj = ShowOspfInterfaceExtensive(device=self.device)
        parsed_output = obj.parse()
        self.assertEqual(parsed_output, self.golden_parsed_output)